/*!
 * cacherrr - version 0.2.1
 *
 * Made with ‚ù§ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2017 Steve Ottoz
 */
(function(a,b){if('function'==typeof define&&define.amd)define(['module','exports'],b);else if('undefined'!=typeof exports)b(module,exports);else{var c={exports:{}};b(c,c.exports),a.Cacherrr=c.exports}})(this,function(a,b){'use strict';function c(f,g){if(!(f instanceof g))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var d=function(){function f(g,h){for(var j=0;j<h.length;j++){var k=h[j];k.enumerable=k.enumerable,k.configurable=!0,'value'in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,h,j){return h&&f(g.prototype,h),j&&f(g,j),g}}(),e=function(){function f(){var g=0>=arguments.length||void 0===arguments[0]?0:arguments[0],h=1>=arguments.length||void 0===arguments[1]?[]:arguments[1];c(this,f),this.expire=g,this.exclude=h,this.entries={}}return d(f,[{key:'get',value:function(h){var j=this;return new Promise(function(k,l){var m=j.entries[h],n=void 0;void 0===h?n=new Error('no path provided'):-1<j.exclude.indexOf(h)?n=new Error(h+' is excluded from caching'):m?m.expires<Date.now()&&(n=new Error('cache for '+h+' is expired')):n=new Error(h+' is not cached yet'),n?(delete j.entries[h],l(n)):k(m.data)})}},{key:'set',value:function(h,j){var k=this,l=2>=arguments.length||void 0===arguments[2]?this.expire:arguments[2];return new Promise(function(m,n){var o=Date.now(),p=void 0;void 0===h?p=new Error('no path provided'):j?-1<k.exclude.indexOf(h)&&(p=new Error(h+' is excluded from caching')):p=new Error('no data provided'),p?n(p):(k.entries[h]={timestamp:o,expires:o+l,data:j},m(j))})}},{key:'clear',value:function(h){return delete this.entries[h],Promise.resolve()}},{key:'clearAll',value:function(){return this.entries=[],Promise.resolve()}}]),f}();b.default=e,a.exports=b['default']});