/*!
 * cacherrr - version 0.3.0
 *
 * Made with ‚ù§ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2020 Steve Ottoz
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).Cacherrr=n()}(this,(function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e(this,r),this.expire=n,this.exclude=t,this.entries={}}var t,i,o;return t=r,(i=[{key:"get",value:function(e){var n=this;return new Promise((function(r,t){var i,o=n.entries[e];void 0===e?i=new Error("no path provided"):n.exclude.indexOf(e)>-1?i=new Error("".concat(e," is excluded from caching")):o?o.expires<Date.now()&&(i=new Error("cache for ".concat(e," is expired"))):i=new Error("".concat(e," is not cached yet")),i?(delete n.entries[e],t(i)):r(o.data)}))}},{key:"set",value:function(e,n){var r=this,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.expire;return new Promise((function(i,o){var a,c=Date.now();void 0===e?a=new Error("no path provided"):n?r.exclude.indexOf(e)>-1&&(a=new Error("".concat(e," is excluded from caching"))):a=new Error("no data provided"),a?o(a):(r.entries[e]={timestamp:c,expires:c+t,data:n},i(n))}))}},{key:"clear",value:function(e){return delete this.entries[e],Promise.resolve()}},{key:"clearAll",value:function(){return this.entries=[],Promise.resolve()}}])&&n(t.prototype,i),o&&n(t,o),r}()}));
